<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store Section</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white">
    <div class="flex flex-col items-center justify-center min-h-screen">
        <h1 class="text-3xl font-bold mb-6">Store Section</h1>
        
        <div id="passwordModal" class="bg-gray-800 p-6 rounded-lg shadow-lg text-center">
            <h3 class="text-xl font-bold mb-4">Enter Store Password</h3>
            <input type="password" id="password" class="bg-gray-700 text-white p-2 rounded w-full mb-4">
            <button onclick="enterPassword()" class="bg-indigo-500 px-4 py-2 rounded-lg hover:bg-indigo-600">Submit</button>
        </div>
        
        <div id="storeOptions" class="hidden mt-6">
            <button onclick="showLogToolEntry()" class="bg-indigo-500 px-4 py-2 rounded-lg hover:bg-indigo-600">Log Tool Entry</button>
            <button onclick="showModifyToolStatus()" class="bg-indigo-500 px-4 py-2 rounded-lg hover:bg-indigo-600">Modify Tool Status</button>
        </div>
    </div>

    <script>
        function enterPassword() {
            let password = document.getElementById("password").value;
            if (password === "tool") {
                document.getElementById("passwordModal").style.display = "none";
                document.getElementById("storeOptions").classList.remove("hidden");
            } else {
                alert("Incorrect password!");
            }
        }

        // Function to show the Log Tool Entry section
function showLogToolEntry() {
    document.getElementById("storeOptions").style.display = "none";
    document.getElementById("logToolSection").style.display = "block";
}

// Function to show the Modify Tool Status section
function showModifyToolStatus() {
    document.getElementById("storeOptions").style.display = "none";
    document.getElementById("modifyToolStatusSection").style.display = "block";
    fetchStorePendingTools();  // Load pending tools
}

// Function to fetch pending tools for Store section
function fetchStorePendingTools() {
    fetch('/get-pending-tools')
    .then(response => response.json())
    .then(data => {
        let tableBody = document.getElementById("pendingToolsTable");
        tableBody.innerHTML = "";
        data.forEach(row => {
            let newRow = `<tr>
                <td class="p-3">${row["Tool Name"]}</td>
                <td class="p-3">${row["Area"]}</td>
                <td class="p-3">${row["Status"]}</td>
            </tr>`;
            tableBody.innerHTML += newRow;
        });
    })
    .catch(error => console.error("Error fetching store pending tools:", error));
}

    </script>
</body>
</html>
